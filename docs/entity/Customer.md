# Customer Entity Documentation

This document provides a line-by-line explanation of the `Customer` entity class, which represents a customer in the CRMS system.

---

```java
package com.hilcoe.crms.entity;
```
*Declares the package for the entity.*

```java
import java.time.LocalDateTime;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.ForeignKey;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import jakarta.persistence.Id;
import jakarta.persistence.JoinColumn;
import jakarta.persistence.OneToOne;
import jakarta.persistence.PrePersist;
import jakarta.persistence.PreUpdate;
import jakarta.persistence.Table;
```
*Imports Java and JPA classes for ORM mapping, relationships, and date/time handling.*

---

```java
@Entity
```
*Marks this class as a JPA entity, mapping it to a database table.*

```java
@Table(name = "customers")
```
*Specifies the table name in the database as `customers`.*

```java
public class Customer {
```
*Defines the Customer entity class.*

---

### Fields

```java
    @Column(name = "created_at", updatable = false)
    private LocalDateTime createdAt;
```
*The date and time when the customer was created. Not updatable after creation.*

```java
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long customerId;
```
*Primary key for the customer, auto-generated by the database.*

```java
    @Column(name = "loyalty_id", length = 100)
    private String loyaltyId;
```
*Loyalty program ID for the customer (optional, up to 100 characters).*

```java
    @Column(name = "name", length = 100)
    private String name;
```
*Name of the customer (up to 100 characters).*

```java
    @Column(columnDefinition = "TEXT")
    private String notes;
```
*Additional notes about the customer (optional, stored as text).*

```java
    @Column(name = "phone", length = 20)
    private String phone;
```
*Phone number of the customer (up to 20 characters).*

```java
    @Column(name = "updated_at")
    private LocalDateTime updatedAt;
```
*The date and time when the customer was last updated.*

```java
    @OneToOne
    @JoinColumn(name = "user_id", referencedColumnName = "user_id", unique = true, nullable = true, foreignKey = @ForeignKey(name = "fk_customer_user"))
    private User user;
```
*One-to-one relationship to the `User` entity. Each customer can be linked to a user account (optional).* 

---

### Getters and Setters

```java
    public LocalDateTime getCreatedAt() {
        return createdAt;
    }
```
*Returns the creation timestamp of the customer.*

// ...other getters and setters...

---

## Summary
- **Purpose:** Represents a customer in the system.
- **Fields:** customerId (PK), name, phone, loyaltyId, notes, createdAt, updatedAt, user.
- **Annotations:** JPA for ORM mapping and relationships.
- **Usage:** Used by customer management and reservation features in the CRMS system.
