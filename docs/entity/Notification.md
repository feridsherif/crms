# Notification Entity Documentation

This document provides a line-by-line explanation of the `Notification` entity class, which represents a notification sent to users in the CRMS system.

---

```java
package com.hilcoe.crms.entity;
```
*Declares the package for the entity.*

```java
import java.time.LocalDateTime;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.EnumType;
import jakarta.persistence.Enumerated;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import jakarta.persistence.Id;
import jakarta.persistence.Table;
```
*Imports Java and JPA classes for ORM mapping, enums, and date/time handling.*

---

```java
@Entity
```
*Marks this class as a JPA entity, mapping it to a database table.*

```java
@Table(name = "notifications")
```
*Specifies the table name in the database as `notifications`.*

```java
public class Notification {
```
*Defines the Notification entity class.*

---

### Enums

```java
    public enum NotificationSeverity {
        CRITICAL, HIGH, LOW, MEDIUM
    }

    public enum NotificationType {
        ERROR, INFO, SUCCESS, SYSTEM, WARNING
    }
```
*Defines possible severity and type values for notifications.*

---

### Fields

```java
    private LocalDateTime createdAt = LocalDateTime.now();
```
*Timestamp when the notification was created. Defaults to now.*

```java
    @Column(columnDefinition = "TEXT")
    private String dataJson;
```
*Additional data for the notification, stored as JSON text.*

```java
    @Column(name = "is_read")
    private boolean isRead = false;
```
*Indicates if the notification has been read. Defaults to false.*

```java
    private String message;
```
*The main message of the notification.*

```java
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long notificationId;
```
*Primary key for the notification, auto-generated by the database.*

```java
    @Deprecated
    private String role; // deprecated, use fan-out
```
*Deprecated field for role-based notifications. Use fan-out instead.*

```java
    @Enumerated(EnumType.STRING)
    private NotificationSeverity severity = NotificationSeverity.LOW;
```
*Severity of the notification, stored as a string. Defaults to LOW.*

```java
    private String title;
```
*Title of the notification.*

```java
    @Enumerated(EnumType.STRING)
    private NotificationType type = NotificationType.INFO;
```
*Type of the notification, stored as a string. Defaults to INFO.*

```java
    private Long userId; // nullable if sent to a role
```
*ID of the user receiving the notification. Nullable if sent to a role.*

---

### Getters

```java
    public LocalDateTime getCreatedAt() {
        return createdAt;
    }
```
*Returns the creation timestamp of the notification.*

---

## Summary
- **Purpose:** Represents a notification sent to users or roles.
- **Fields:** notificationId (PK), userId, title, message, severity, type, isRead, dataJson, createdAt, role (deprecated).
- **Annotations:** JPA for ORM mapping and enums.
- **Usage:** Used by the notification service and in-app/push notification features in the CRMS system.
