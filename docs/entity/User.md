# User Entity Documentation

This document provides a line-by-line explanation of the `User` entity class, which represents a system user in the CRMS system.

---

```java
package com.hilcoe.crms.entity;
```
*Declares the package for the entity.*

```java
import java.util.Set;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.FetchType;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import jakarta.persistence.Id;
import jakarta.persistence.JoinColumn;
import jakarta.persistence.JoinTable;
import jakarta.persistence.ManyToMany;
import jakarta.persistence.Table;
```
*Imports Java and JPA classes for ORM mapping, relationships, and collections.*

---

```java
@Entity
```
*Marks this class as a JPA entity, mapping it to a database table.*

```java
@Table(name = "users")
```
*Specifies the table name in the database as `users`.*

```java
public class User {
```
*Defines the User entity class.*

---

### Fields

```java
    @Column(name = "email", nullable = false, unique = true)
    private String email;
```
*Email address of the user. Must be unique and not null.*

```java
    @Column(name = "password_hash", nullable = false)
    private String passwordHash;
```
*Hashed password for authentication. Cannot be null.*

```java
    @ManyToMany(fetch = FetchType.LAZY)
    @JoinTable(name = "user_roles", joinColumns = @JoinColumn(name = "user_id"), inverseJoinColumns = @JoinColumn(name = "role_id"))
    private Set<Role> roles;
```
*Many-to-many relationship to the `Role` entity. Each user can have multiple roles. Uses a join table `user_roles`.*

```java
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "user_id")
    private Long userId;
```
*Primary key for the user, auto-generated by the database.*

```java
    @Column(name = "username", nullable = false, unique = true)
    private String username;
```
*Username for login. Must be unique and not null.*

---

### Constructors

```java
    public User() {
    }
```
*Default no-argument constructor required by JPA.*

```java
    public User(Long userId, String username, String email, String passwordHash, Set<Role> roles) {
        this.userId = userId;
        this.username = username;
        this.email = email;
        this.passwordHash = passwordHash;
        this.roles = roles;
    }
```
*All-arguments constructor for creating a User instance with all fields.*

---

### Getters

```java
    public String getEmail() {
        return email;
    }
```
*Returns the email address of the user.*

---

## Summary
- **Purpose:** Represents a system user for authentication and authorization.
- **Fields:** userId (PK), username, email, passwordHash, roles.
- **Annotations:** JPA for ORM mapping and many-to-many relationships.
- **Usage:** Used by authentication, authorization, and user management features in the CRMS system.
